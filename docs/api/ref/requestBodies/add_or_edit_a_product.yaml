components:
  schemas:
    add_or_edit_a_product:
      allOf:
        - $ref: "./user_id_password.yaml#/components/schemas/user_id__password"
        - $ref: ./change_ref_properties.yaml
        # Localization
        - $ref: "./lc_cc.yaml#/components/schemas/lc__cc"
        # Others
        - type: object
          description: |
            You can provide most of the properties defined in the product schema.
          properties:
            packaging:
              type: string
              description: |
                Packaging type, format, material.
                The [v3 API documentation](https://openfoodfacts.github.io/openfoodfacts-server/api/ref-v3/#operation/post-api-v3-product-barcode)
                has a more structured data for `packaging`.
              examples:
                - Frozen
            # BASE
            code:
                $ref: "../schemas/product_base.yaml#/properties/code"
            generic_name:
                $ref: "../schemas/product_base.yaml#/properties/generic_name"
            lang:
                $ref: "../schemas/product_base.yaml#/properties/lang"
            product_name:
                $ref: "../schemas/product_base.yaml#/properties/product_name"
            quantity:
                $ref: "../schemas/product_base.yaml#/properties/quantity"
            # TAGS
            brands:
                $ref: "../schemas/product_tags.yaml#/properties/brands"
            categories:
                $ref: "../schemas/product_tags.yaml#/properties/categories"
            countries:
                $ref: "../schemas/product_tags.yaml#/properties/countries"
            emb_codes:
                $ref: "../schemas/product_tags.yaml#/properties/emb_codes"
            labels:
                $ref: "../schemas/product_tags.yaml#/properties/labels"
            manufacturing_places:
                $ref: "../schemas/product_tags.yaml#/properties/manufacturing_places"
            # ingredients
            allergens:
                $ref: "../schemas/product_ingredients.yaml#/properties/allergens"
            ingredients_text:
                $ref: "../schemas/product_ingredients.yaml#/properties/ingredients_text"
            origins:
                $ref: "../schemas/product_ingredients.yaml#/properties/origins"
            traces:
                $ref: "../schemas/product_ingredients.yaml#/properties/traces"
            # Extended
            link:
                $ref: "../schemas/product_extended.yaml#/properties/link"
            stores:
                $ref: "../schemas/product_extended.yaml#/properties/stores"
          required:
            - code